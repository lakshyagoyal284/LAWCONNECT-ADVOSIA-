{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Table,Button,Badge,Alert,Spinner}from'react-bootstrap';import{Link}from'react-router-dom';import{caseService}from'../services/api';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CasesPage=()=>{const[cases,setCases]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const{user}=useAuth();useEffect(()=>{fetchCases();},[]);const fetchCases=async()=>{try{setLoading(true);const response=await caseService.getAll();setCases(response.data);}catch(err){setError('Failed to fetch cases');console.error(err);}finally{setLoading(false);}};const handleDeleteCase=async caseId=>{if(window.confirm('Are you sure you want to delete this case?')){try{await caseService.delete(caseId);setCases(cases.filter(c=>c.id!==caseId));}catch(err){setError('Failed to delete case');console.error(err);}}};const getStatusBadge=status=>{const variant={'open':'primary','in_progress':'warning','closed':'success'}[status]||'secondary';return/*#__PURE__*/_jsx(Badge,{bg:variant,children:status.replace('_',' ').toUpperCase()});};if(loading){return/*#__PURE__*/_jsxs(Container,{className:\"py-4 text-center\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"Loading cases...\"})]});}return/*#__PURE__*/_jsxs(Container,{className:\"py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Cases\"}),(user===null||user===void 0?void 0:user.role)==='client'&&/*#__PURE__*/_jsx(Button,{as:Link,to:\"/cases/new\",variant:\"primary\",children:\"New Case\"})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),cases.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"No cases found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:(user===null||user===void 0?void 0:user.role)==='client'?'Create your first case to get started.':'No cases available at the moment.'}),(user===null||user===void 0?void 0:user.role)==='client'&&/*#__PURE__*/_jsx(Button,{as:Link,to:\"/cases/new\",variant:\"primary\",children:\"Create Case\"})]}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Case Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cases.map(caseItem=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:caseItem.title}),/*#__PURE__*/_jsx(\"td\",{children:caseItem.category}),/*#__PURE__*/_jsx(\"td\",{children:getStatusBadge(caseItem.status)}),/*#__PURE__*/_jsx(\"td\",{children:new Date(caseItem.created_at).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",as:Link,to:\"/cases/\".concat(caseItem.id),className:\"me-2\",children:\"View\"}),((user===null||user===void 0?void 0:user.role)==='admin'||caseItem.user_id===(user===null||user===void 0?void 0:user.id))&&/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",size:\"sm\",onClick:()=>handleDeleteCase(caseItem.id),children:\"Delete\"})]})]},caseItem.id))})]})]});};export default CasesPage;","map":{"version":3,"names":["React","useState","useEffect","Container","Table","Button","Badge","Alert","Spinner","Link","caseService","useAuth","jsx","_jsx","jsxs","_jsxs","CasesPage","cases","setCases","loading","setLoading","error","setError","user","fetchCases","response","getAll","data","err","console","handleDeleteCase","caseId","window","confirm","delete","filter","c","id","getStatusBadge","status","variant","bg","children","replace","toUpperCase","className","animation","role","as","to","length","striped","bordered","hover","responsive","map","caseItem","title","category","Date","created_at","toLocaleDateString","size","concat","user_id","onClick"],"sources":["C:/Users/laksh/Desktop/ASEP FINAL/lawconnect/deploy-ready/frontend/src/pages/CasesPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Table, Button, Badge, Alert, Spinner } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { caseService } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst CasesPage = () => {\r\n  const [cases, setCases] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    fetchCases();\r\n  }, []);\r\n\r\n  const fetchCases = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await caseService.getAll();\r\n      setCases(response.data);\r\n    } catch (err) {\r\n      setError('Failed to fetch cases');\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCase = async (caseId) => {\r\n    if (window.confirm('Are you sure you want to delete this case?')) {\r\n      try {\r\n        await caseService.delete(caseId);\r\n        setCases(cases.filter(c => c.id !== caseId));\r\n      } catch (err) {\r\n        setError('Failed to delete case');\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const variant = {\r\n      'open': 'primary',\r\n      'in_progress': 'warning',\r\n      'closed': 'success'\r\n    }[status] || 'secondary';\r\n    \r\n    return <Badge bg={variant}>{status.replace('_', ' ').toUpperCase()}</Badge>;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className=\"py-4 text-center\">\r\n        <Spinner animation=\"border\" />\r\n        <p className=\"mt-2\">Loading cases...</p>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"py-4\">\r\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h2>My Cases</h2>\r\n        {user?.role === 'client' && (\r\n          <Button as={Link} to=\"/cases/new\" variant=\"primary\">\r\n            New Case\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {error && <Alert variant=\"danger\">{error}</Alert>}\r\n\r\n      {cases.length === 0 ? (\r\n        <div className=\"text-center py-5\">\r\n          <h4>No cases found</h4>\r\n          <p className=\"text-muted\">\r\n            {user?.role === 'client' \r\n              ? 'Create your first case to get started.'\r\n              : 'No cases available at the moment.'\r\n            }\r\n          </p>\r\n          {user?.role === 'client' && (\r\n            <Button as={Link} to=\"/cases/new\" variant=\"primary\">\r\n              Create Case\r\n            </Button>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <Table striped bordered hover responsive>\r\n          <thead>\r\n            <tr>\r\n              <th>Case Title</th>\r\n              <th>Category</th>\r\n              <th>Status</th>\r\n              <th>Created Date</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {cases.map((caseItem) => (\r\n              <tr key={caseItem.id}>\r\n                <td>{caseItem.title}</td>\r\n                <td>{caseItem.category}</td>\r\n                <td>{getStatusBadge(caseItem.status)}</td>\r\n                <td>{new Date(caseItem.created_at).toLocaleDateString()}</td>\r\n                <td>\r\n                  <Button \r\n                    variant=\"outline-primary\" \r\n                    size=\"sm\" \r\n                    as={Link} \r\n                    to={`/cases/${caseItem.id}`}\r\n                    className=\"me-2\"\r\n                  >\r\n                    View\r\n                  </Button>\r\n                  {(user?.role === 'admin' || caseItem.user_id === user?.id) && (\r\n                    <Button \r\n                      variant=\"outline-danger\" \r\n                      size=\"sm\" \r\n                      onClick={() => handleDeleteCase(caseItem.id)}\r\n                    >\r\n                      Delete\r\n                    </Button>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CasesPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}