{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Row,Col,Card,Form,Button,Badge,Spinner}from'react-bootstrap';import{Send,Check}from'lucide-react';import{chatService}from'../../services/chatService';import{useAuth}from'../../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkingChatComponent=_ref=>{let{caseId,caseTitle,receiverId,receiverName}=_ref;const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState('');const[loading,setLoading]=useState(true);const[sending,setSending]=useState(false);const[lastMessageCount,setLastMessageCount]=useState(0);const messagesEndRef=useRef(null);const pollingIntervalRef=useRef(null);const{user}=useAuth();// Load initial messages\nuseEffect(()=>{loadMessages();startPolling();return()=>{if(pollingIntervalRef.current){clearInterval(pollingIntervalRef.current);}};},[caseId]);const loadMessages=async()=>{try{setLoading(true);const response=await chatService.getCaseMessages(caseId);const messages=response.data||[];setMessages(messages);setLastMessageCount(messages.length);}catch(error){console.error('Error loading messages:',error);setMessages([]);}finally{setLoading(false);}};// Smart polling - check for new messages every 2 seconds\nconst startPolling=()=>{if(pollingIntervalRef.current){clearInterval(pollingIntervalRef.current);}pollingIntervalRef.current=setInterval(async()=>{try{const response=await chatService.getCaseMessages(caseId);const newMessages=response.data||[];// Only update if there are actually new messages\nif(newMessages.length!==lastMessageCount){setMessages(newMessages);setLastMessageCount(newMessages.length);}}catch(error){console.error('Polling error:',error);}},2000);// Poll every 2 seconds for better responsiveness\n};// Auto-scroll to bottom when new messages arrive\nuseEffect(()=>{scrollToBottom();},[messages]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};const handleSendMessage=async e=>{e.preventDefault();if(!newMessage.trim()||sending)return;const messageData={caseId:parseInt(caseId),content:newMessage.trim(),receiverId:parseInt(receiverId)};console.log('Sending message:',messageData);try{setSending(true);// Send message via API\nconst response=await chatService.sendMessage(messageData);console.log('Message sent successfully:',response.data);// Clear input\nsetNewMessage('');// Immediately refresh messages to show the new one\nawait loadMessages();}catch(error){var _error$response,_error$response2,_error$response2$data,_error$response3;console.error('Error sending message:',error);console.error('Error details:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);// Show user-friendly error\nconst errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message||'Failed to send message';// For testing, create a local message if API fails\nif(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===403){// Permission denied - show helpful message\nalert('Chat access denied. Make sure a bid has been accepted for this case.');}else{alert(\"Failed to send message: \".concat(errorMessage));}}finally{setSending(false);}};const formatTime=timestamp=>{return new Date(timestamp).toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'});};const isOwnMessage=message=>message.sender_id===user.id;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center p-4\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})});}return/*#__PURE__*/_jsxs(Card,{className:\"chat-component h-100\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-primary text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:caseTitle}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Chat with \",receiverName]})]}),/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Active\"})]})}),/*#__PURE__*/_jsx(Card.Body,{className:\"p-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"chat-messages\",style:{height:'400px',overflowY:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-muted py-4\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No messages yet. Start the conversation!\"})}):messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:\"message mb-3 \".concat(isOwnMessage(message)?'text-end':'text-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-inline-block \".concat(isOwnMessage(message)?'':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-bubble p-2 rounded-2 \".concat(isOwnMessage(message)?'bg-primary text-white':'bg-light text-dark'),style:{maxWidth:'70%'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:message.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-time small \".concat(isOwnMessage(message)?'text-white-50':'text-muted'),children:[formatTime(message.created_at),isOwnMessage(message)&&/*#__PURE__*/_jsx(\"span\",{className:\"ms-1\",children:message.is_read?/*#__PURE__*/_jsx(Check,{size:12}):/*#__PURE__*/_jsx(Check,{size:12})})]})]}),!isOwnMessage(message)&&/*#__PURE__*/_jsx(\"div\",{className:\"message-sender small text-muted mt-1\",children:message.sender_name})]})},message.id)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})})}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"p-3\",children:[/*#__PURE__*/_jsx(Form,{onSubmit:handleSendMessage,children:/*#__PURE__*/_jsxs(Row,{className:\"g-2\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Type a message...\",value:newMessage,onChange:e=>setNewMessage(e.target.value),className:\"border-0 bg-light\",disabled:sending})}),/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"primary\",disabled:!newMessage.trim()||sending,className:\"d-flex align-items-center\",children:[sending?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\",className:\"me-1\"}):/*#__PURE__*/_jsx(Send,{size:16,className:\"me-1\"}),sending?'Sending...':'Send']})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-center\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Messages sync automatically every 2 seconds\"})})]})]});};export default WorkingChatComponent;","map":{"version":3,"names":["React","useState","useEffect","useRef","Row","Col","Card","Form","Button","Badge","Spinner","Send","Check","chatService","useAuth","jsx","_jsx","jsxs","_jsxs","WorkingChatComponent","_ref","caseId","caseTitle","receiverId","receiverName","messages","setMessages","newMessage","setNewMessage","loading","setLoading","sending","setSending","lastMessageCount","setLastMessageCount","messagesEndRef","pollingIntervalRef","user","loadMessages","startPolling","current","clearInterval","response","getCaseMessages","data","length","error","console","setInterval","newMessages","scrollToBottom","_messagesEndRef$curre","scrollIntoView","behavior","handleSendMessage","e","preventDefault","trim","messageData","parseInt","content","log","sendMessage","_error$response","_error$response2","_error$response2$data","_error$response3","errorMessage","message","status","alert","concat","formatTime","timestamp","Date","toLocaleTimeString","hour","minute","isOwnMessage","sender_id","id","className","children","animation","Header","bg","Body","style","height","overflowY","map","maxWidth","created_at","is_read","size","sender_name","ref","Footer","onSubmit","Control","type","placeholder","value","onChange","target","disabled","xs","variant"],"sources":["C:/Users/laksh/Desktop/ASEP FINAL/lawconnect/deploy-ready/frontend/src/components/chat/WorkingChatComponent.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Row, Col, Card, Form, Button, Badge, Spinner } from 'react-bootstrap';\nimport { Send, Check } from 'lucide-react';\nimport { chatService } from '../../services/chatService';\nimport { useAuth } from '../../context/AuthContext';\n\nconst WorkingChatComponent = ({ caseId, caseTitle, receiverId, receiverName }) => {\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n  const [lastMessageCount, setLastMessageCount] = useState(0);\n  const messagesEndRef = useRef(null);\n  const pollingIntervalRef = useRef(null);\n  \n  const { user } = useAuth();\n\n  // Load initial messages\n  useEffect(() => {\n    loadMessages();\n    startPolling();\n    \n    return () => {\n      if (pollingIntervalRef.current) {\n        clearInterval(pollingIntervalRef.current);\n      }\n    };\n  }, [caseId]);\n\n  const loadMessages = async () => {\n    try {\n      setLoading(true);\n      const response = await chatService.getCaseMessages(caseId);\n      const messages = response.data || [];\n      setMessages(messages);\n      setLastMessageCount(messages.length);\n    } catch (error) {\n      console.error('Error loading messages:', error);\n      setMessages([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Smart polling - check for new messages every 2 seconds\n  const startPolling = () => {\n    if (pollingIntervalRef.current) {\n      clearInterval(pollingIntervalRef.current);\n    }\n    \n    pollingIntervalRef.current = setInterval(async () => {\n      try {\n        const response = await chatService.getCaseMessages(caseId);\n        const newMessages = response.data || [];\n        \n        // Only update if there are actually new messages\n        if (newMessages.length !== lastMessageCount) {\n          setMessages(newMessages);\n          setLastMessageCount(newMessages.length);\n        }\n      } catch (error) {\n        console.error('Polling error:', error);\n      }\n    }, 2000); // Poll every 2 seconds for better responsiveness\n  };\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    \n    if (!newMessage.trim() || sending) return;\n\n    const messageData = {\n      caseId: parseInt(caseId),\n      content: newMessage.trim(),\n      receiverId: parseInt(receiverId)\n    };\n\n    console.log('Sending message:', messageData);\n\n    try {\n      setSending(true);\n      \n      // Send message via API\n      const response = await chatService.sendMessage(messageData);\n      console.log('Message sent successfully:', response.data);\n      \n      // Clear input\n      setNewMessage('');\n      \n      // Immediately refresh messages to show the new one\n      await loadMessages();\n      \n    } catch (error) {\n      console.error('Error sending message:', error);\n      console.error('Error details:', error.response?.data);\n      \n      // Show user-friendly error\n      const errorMessage = error.response?.data?.message || error.message || 'Failed to send message';\n      \n      // For testing, create a local message if API fails\n      if (error.response?.status === 403) {\n        // Permission denied - show helpful message\n        alert('Chat access denied. Make sure a bid has been accepted for this case.');\n      } else {\n        alert(`Failed to send message: ${errorMessage}`);\n      }\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const formatTime = (timestamp) => {\n    return new Date(timestamp).toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const isOwnMessage = (message) => message.sender_id === user.id;\n\n  if (loading) {\n    return (\n      <div className=\"d-flex justify-content-center p-4\">\n        <Spinner animation=\"border\" />\n      </div>\n    );\n  }\n\n  return (\n    <Card className=\"chat-component h-100\">\n      <Card.Header className=\"bg-primary text-white\">\n        <div className=\"d-flex justify-content-between align-items-center\">\n          <div>\n            <h6 className=\"mb-0\">{caseTitle}</h6>\n            <small>Chat with {receiverName}</small>\n          </div>\n          <Badge bg=\"success\">\n            Active\n          </Badge>\n        </div>\n      </Card.Header>\n\n      <Card.Body className=\"p-0\">\n        <div className=\"chat-messages\" style={{ height: '400px', overflowY: 'auto' }}>\n          <div className=\"p-3\">\n            {messages.length === 0 ? (\n              <div className=\"text-center text-muted py-4\">\n                <p>No messages yet. Start the conversation!</p>\n              </div>\n            ) : (\n              messages.map((message) => (\n                <div\n                  key={message.id}\n                  className={`message mb-3 ${isOwnMessage(message) ? 'text-end' : 'text-start'}`}\n                >\n                  <div className={`d-inline-block ${isOwnMessage(message) ? '' : ''}`}>\n                    <div\n                      className={`message-bubble p-2 rounded-2 ${\n                        isOwnMessage(message)\n                          ? 'bg-primary text-white'\n                          : 'bg-light text-dark'\n                      }`}\n                      style={{ maxWidth: '70%' }}\n                    >\n                      <div className=\"message-content\">{message.content}</div>\n                      <div className={`message-time small ${isOwnMessage(message) ? 'text-white-50' : 'text-muted'}`}>\n                        {formatTime(message.created_at)}\n                        {isOwnMessage(message) && (\n                          <span className=\"ms-1\">\n                            {message.is_read ? <Check size={12} /> : <Check size={12} />}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    {!isOwnMessage(message) && (\n                      <div className=\"message-sender small text-muted mt-1\">\n                        {message.sender_name}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))\n            )}\n            \n            <div ref={messagesEndRef} />\n          </div>\n        </div>\n      </Card.Body>\n\n      <Card.Footer className=\"p-3\">\n        <Form onSubmit={handleSendMessage}>\n          <Row className=\"g-2\">\n            <Col>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Type a message...\"\n                value={newMessage}\n                onChange={(e) => setNewMessage(e.target.value)}\n                className=\"border-0 bg-light\"\n                disabled={sending}\n              />\n            </Col>\n            <Col xs=\"auto\">\n              <Button\n                type=\"submit\"\n                variant=\"primary\"\n                disabled={!newMessage.trim() || sending}\n                className=\"d-flex align-items-center\"\n              >\n                {sending ? (\n                  <Spinner animation=\"border\" size=\"sm\" className=\"me-1\" />\n                ) : (\n                  <Send size={16} className=\"me-1\" />\n                )}\n                {sending ? 'Sending...' : 'Send'}\n              </Button>\n            </Col>\n          </Row>\n        </Form>\n        <div className=\"mt-2 text-center\">\n          <small className=\"text-muted\">\n            Messages sync automatically every 2 seconds\n          </small>\n        </div>\n      </Card.Footer>\n    </Card>\n  );\n};\n\nexport default WorkingChatComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}